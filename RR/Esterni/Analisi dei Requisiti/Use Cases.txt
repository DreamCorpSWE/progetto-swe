Attori:
* Utente generico
* Granfana
* Libreria jsbayes


UTENTE GENERICO


UC1: Inserire definizione rete bayesiana
Precondizione: l’utente deve trovarsi nell’interfaccia principale e deve possedere una definizione di rete bayesiana che vuole inserire
Postcondizione: viene inserita nell’applicativo la definizione di rete
Attore primario: Utente
Contestualizzazione / Scenario principale:
1. l’utente carica la definizione della rete bayesiana


UC1.1: Inserire la definizione della rete bayesiana sottoforma di file .json
Precondizione:  l’utente deve trovarsi nell’interfaccia principale e possedere un file .json contenente una definizione di rete bayesiana che vuole inserire 
Postcondizione: viene inserita nell’applicativo la definizione di rete presente nel file .json
Attore primario: Utente
Contestualizzazione / Scenario principale:
1. L’utente preme il pulsante per l’upload del file .json contenente la definizione di rete
2. l’utente sceglie il file
3. Upload del file
Estensioni: 
1. C’è stato un problema durante l’upload (ad esempio: errore generico di upload che non ho idea di come si possa verificare)
   1. Viene visualizzato un messaggio di errore
   2. l’utente viene rimandato all’interfaccia di upload
1. C’è stato un problema con l’interpretazione della rete bayesiana (ad esempio: file .json non contenente codice .json formattato correttamente)
   1. Viene visualizzato un messaggio di errore
   2. l’utente viene rimandato all’interfaccia di upload


UC1.2: Inserire definizione rete bayesiana sottoforma di codice json
Precondizione:  l’utente deve trovarsi nell’interfaccia principale e possedere codice json di una definizione di rete bayesiana che vuole inserire 
Postcondizione: viene inserita nell’applicativo la definizione di rete descritta dal codice json 
Attore primario: Utente
Contestualizzazione / Scenario principale:
1. l’utente incolla il codice json nel text area dedicata
2. l’utente preme il pulsante “Insert Baseyan Network”


Estensioni: 
1. C’è stato un problema con l’interpretazione della rete bayesiana (ad esempio: file .json non contenente codice .json formattato correttamente)
   1. Viene visualizzato un messaggio di errore
   2. l’utente viene rimandato all’interfaccia di upload




Per la rappresentazione grafica questo potrebbe esserti utile:
//se esiste un nodo
Modificare ->-> Rimuovere -> Associare
Rimuovere
//se non esiste
Associare


Dipendenze delle funzionalità
Modifica include Rimuovere 
Modifica include Associare


UC2: Associare un nodo della rete ad un flusso dati di Grafana
Precondizione: L’utente deve trovarsi nella schermata di impostazioni della rete bayesiana e deve essere presente la definizione della rete bayesiana.
Postcondizione: Il nodo delle rete è associato ad un flusso dati.
Attore primario: Utente
Attore secondario: Grafana
Contestualizzazione / Scenario principale:
1. L’utente seleziona un flusso di monitoraggio
2. Seleziona la funzione “associa” (funzione per ora inesistente che dovremmo creare)
3. Sceglie la rete bayesiana di interesse da un elenco (se c’è nè più di una)
4. Seleziona il nodo della rete
5. Viene visualizzato un messaggio di conferma (“associazione riuscita”)
Estensioni:
1. Il flusso di monitoraggio è stato precedentemente associato ad un nodo della stessa rete (UC5)


UC3: Modificare l’associazione di un nodo della rete già associato ad un flusso dati di Grafana
Precondizione: L’utente deve trovarsi nella schermata di impostazioni della rete bayesiana e un nodo della rete deve essere stato associato ad un flusso di monitoraggio (come precondizione c’è UC2).
Postcondizione: Un nuovo nodo delle rete è associato al flusso dati di interesse.
Attore primario: Utente
Attore secondario: Grafana
Contestualizzazione / Scenario principale:
1. UC4
   1. L’utente seleziona un flussio di monitoraggio
   2. Seleziona la funzione “rimuovi associazione” (funzione nostra)
   3. Viene visualizzato un messaggio di conferma (“rimozione riuscita”)
1. UC2
   1. L’utente seleziona il flusso di monitoraggio
   2. Seleziona la funzione “associa” (funzione nostra)
   3. Sceglie la rete bayesiana di interesse da un elenco (se c’è nè più di una)
   4. Seleziona il nodo della rete
   5. Viene visualizzato un messaggio di conferma (“associazione riuscita”)


UC4: Rimuovere un nodo della rete associato ad un flusso dati di Grafana
Precondizione: L’utente deve trovarsi nella schermata di impostazioni della rete bayesiana e almeno un nodo della rete deve essre stato associato ad un flusso di monitoraggio (come precondizione c’è UC2).
Postcondizione: Viene rimossa l’associazione del nodo di interesse al flusso dati.
Attore primario: Utente
Attore secondario: Grafana
Contestualizzazione / Scenario principale:
1. L’utente seleziona un flussio di monitoraggio
2. Seleziona la funzione “rimuovi associazione” (funzione nostra)
3. Viene visualizzato un messaggio di conferma (“rimozione riuscita”)


UC5: Gestione duplice associazione di un nodo della rete ad uno stesso flusso dati di Grafana
Precondizione: L’utente ha selezionato un flusso di monitoraggio a cui era stato precedentemente associato un altro nodo appartenente alla stessa rete.
Postcondizione: Un nodo delle rete è associato ad un flusso dati.
Attore primario: Utente
Attore secondario: Grafana
Contestualizzazione / Scenario principale:
1. l’utente può scegliere tra:
   1. UC5.1: rimozione nodo precendentemente associato e inserimento nuovo nodo
   2. UC5.2: annullamento operazione di associazione multipla di due nodi della stessa rete allo stesso flusso




UC5.1: Rimozione del nodo precedentemente associato e inserimento nuovo nodo
Precondizione: L’utente ha selezionato un flusso di monitoraggio a cui era stato precedentemente associato un altro nodo appartenente alla stessa rete.
Postcondizione: Un nuovo nodo delle rete è associato al flusso dati.
Attore primario: Utente
Attore secondario: Grafana
Contestualizzazione / Scenario principale:
1. L’utente seleziona la funzione “rimuovi associazione” (funzione nostra)
2. Viene visualizzato un messaggio di conferma (“rimozione riuscita”)
3. L’utente seleziona il nuovo nodo dalla rete di interesse
4. Viene visualizzato un messaggio di conferma (“associazione riuscita”)




UC5.2: Annullamento operazione di associazione multipla di due nodi della stessa rete allo stesso flusso (G) 
Precondizione: L’utente ha selezionato un flusso di monitoraggio (G)  a cui era stato precedentemente associato un altro nodo appartenente alla stessa rete.
Postcondizione: Un nodo delle rete è associato ad un flusso dati (G).
Attore primario: Utente
Attore secondario: Grafana
Contestualizzazione / Scenario principale:
1. L’utente seleziona la funzione “annulla associazione multipla” (funzione nostra)
2. Viene visualizzato un messaggio di conferma (“operazione annullata”)


GRAFANA


UC6: Lancio di un alert
Precondizione: Il flusso di monitoraggio (G) di interesse ha un alert ed è associato ad un nodo di una rete bayesiana.
Postcondizione: Il messaggio di alert è stato inviato
Attore primario: Grafana
Contestualizzazione / Scenario principale:
1. Grafana rileva che un flusso di monitoraggio (G) non rispetta le condizioni di uno dei suoi alert applicategli
2. Grafana invia il messaggio di alert al sistema (noi siamo il sistema a cui invia i dati di alert)
Estensioni:
1. C’è stato un problema nell’invio del messaggio di alert 
   1. Viene visualizzato un messaggio di errore
   2. Avviene nuovamente il tentativo di invio del messaggio (UC6)


UC7: Ricezione di dati risultato della BNI (Bayesian Network Inference) (G) per costruire panels
Precondizione: E’ presente una definizione di rete bayesiana e almeno un nodo della rete è associato ad un flusso dati di monitoraggio di Grafana. Deve essere avvenuto il ricalcolo delle probabilità dopo l’invio di un messaggio alert.
Postcondizione: I dati vengono visualizzati in un panel sottoforma di grafico.
Attore primario: Grafana
Contestualizzazione / Scenario principale:
1. Grafana riceve i dati dal sistema
2. Grafana produce dei grafici a partire dai dati raccolti
Estensioni:
1. E’ avvenuto un problema con l’interpretazione dei dati
   1. Il formato di un certo insieme di dati non è interpretabile correttamente da Grafana (viene visualizzato un messaggio di errore)
   2. Non avviene il display di quell’insieme di dati


JSBAYES


UC8: Invio dei dati di ricalcolo delle probabilità sulla rete
Precondizione: Deve essere stato inviato un alert da Grafana contenente le informazioni con cui aggiornare la rete e fare inferenza
Postcondizione: Vengono ricalcolate le probabilità condizionate dei nodi non monitorati della rete.
Attore primario: jsbayes
Attore secondario: Grafana
Contestualizzazione / Scenario principale:
1. La libreria jsbayes riceve in input i valori dei nodi monitorati, contenuti nell’alert inviato da Grafana
2. Avviene il ricalcolo delle probabilità dei nodi non monitorati
3. Vengono restituiti i risultati
Estensioni:
1. Errore nel calcolo delle probabilità
   1. Viene visualizzato un messaggio di errore
   2. Viene annullata l’operazione di invio dei dati rielaborati


Note:
I casi d’uso sono le funzionalità esterne che il nostro prodotto offre agli attori. Quindi anche se ci sono delle cose da sviluppare (per esempio come trasferire i dati da grafana alla libreria jsbayes) non è detto che siano da includere come casi d’uso.
Non sono sicuro che riportare il caso d’uso UC8 sia corretto in quanto non è una funzionalità per un utente “libreria jsbayes” ma più una funzionalità richiesta da “libreria jsbayes”.


Azioni del nostro sistema non visibili agli attori, nè all’utente, nè a grafana:
* Cambiare lo stato di un nodo della rete in base ad valore ricevuto da Grafana oppure dal ricalcolo delle probabilità ritornato dalla libreria jsbayes
Azioni di Grafana che possiamo riutilizzare:
* Creare panels di visualizzazione a partire da dati presenti in un database
Azioni di jsbayes che possiamo riutilizzare:
* Ricalcolo delle probabilità della rete (baseyan inference)